!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.whitelister=t():e.whitelister=t()}(this,function(){return function(e){function t(s){if(r[s])return r[s].exports;var n=r[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){const{isFunc:s}=r(1);e.exports.BaseError=class extends Error{constructor(e=""){super(),this.name="BaseError",this.message=e}toJSON(){return{message:this.message}}},e.exports.ArgumentError=class extends e.exports.BaseError{constructor(e,t=""){super(),this.name="ArgumentError";const r=t.length>0?` ${t}`:"";this.message=`${e}${r}`}},e.exports.FieldError=class extends e.exports.BaseError{constructor(e,t="is invalid"){super(),this.name="FieldError",this.field=e,this.message=t}toString(){return`${this.field} ${this.message}`}toJSON(){return{field:this.field,message:this.message}}},e.exports.WhitelistError=class extends e.exports.BaseError{constructor(t=[]){super(),this.name="WhitelistError",this.errors=[],this.message="",t.forEach(t=>{t instanceof e.exports.WhitelistError?(t.errors.forEach(e=>{this.errors.push(e)}),this.addToMessage(t.message)):s(t.toJSON)?(this.errors.push(t.toJSON()),this.addToMessage(t.toString())):(this.errors.push({message:t.toString()}),this.addToMessage(t.message||t.toString()))})}addToMessage(e){this.message.length>0?this.message=`${this.message}, ${e}`:this.message=e}toJSON(){return{message:this.message,errors:this.errors}}}},function(e,t){const r=Object.prototype.toString,s=Object.prototype.hasOwnProperty,n=e=>void 0!==e;e.exports={has:s,includesOneOf:(e,t)=>{const[r,s]=e.length<t.length?[e,t]:[t,e];return r.some(e=>s.includes(e))},isDefined:n,isFunc:e=>"[object Function]"===r.call(e),isNil:e=>!n(e)||null===e,isObject:e=>"[object Object]"===r.call(e),isString:e=>"[object String]"===r.call(e)}},function(e,t,r){e.exports=r(3),e.exports.errors=r(0)},function(e,t,r){const{ArgumentError:s,FieldError:n,WhitelistError:i}=r(0),{has:o,includesOneOf:a,isDefined:l,isFunc:c,isNil:u,isObject:f,isString:h}=r(1),m={config:{nestedNames:!0},setConfig:(e={})=>{l(e.nestedNames)&&(m.config.nestedNames=e.nestedNames)}};m.byRules=function(e,t,r,a){function g(e,t,r,n=""){if(!o.call(m,e))throw new s(`${n}.${e}`,"is invalid");const i=m[e];let a;try{a=i(t,r,n)}catch(e){p.push(e),a=r}return a}if(!f(e)&&!h(e)&&!c(e))throw new s("rules","is not an object or string");const p=[],w=function(e){if(p.length>0)throw new i(p);return e};if(h(e))return g(e,{},t,r);if(c(e)){if(!e(t))throw new n(`${r||"value"}`,"is invalid");return t}if(o.call(e,"type")&&!a){const s=o.call(e,"preTransform")&&c(e.preTransform)?e.preTransform(t):t;let n;try{n=g(e.type,e,s,r)}catch(e){p.push(e)}return w(n)}const d={};return Object.keys(e).forEach(i=>{const a=e[i]||{},f=m.config.nestedNames&&r?`${r}[${i}]`:i;let w;try{if(h(a)&&o.call(t,i))w=t[i],d[i]=g(a,{},w,f);else if(c(a)){if(w=t[i],!a(w))throw new n(f,"is invalid");d[i]=w}else if(o.call(t,i)&&l(t[i]))if(null!==(w=t[i])||!a.allowNull&&"null"!==a.type){if(u(w)&&a.required)throw new n(f,"is required");if(!o.call(m,a.type)&&!c(a.filterWith))throw new s(`${f}.type`,"is invalid");{if(o.call(a,"preTransform")&&c(a.preTransform)&&(w=a.preTransform(w,f)),c(a.filterWith)){if(!a.filterWith(w,f))throw new n(f,"is invalid")}else w=m[a.type](a,w,f);const e=e=>e.some(e=>"function"==typeof e?e(w):e===w);if(Array.isArray(a.acceptedValues)&&!e(a.acceptedValues))throw new n(f,`must be one of ${a.acceptedValues.join(", ")}`);d[i]=o.call(a,"postTransform")&&c(a.postTransform)?a.postTransform(w,f):w}}else d[i]=w;else if(l(a.default))d[i]=a.default;else if(a.required)throw new n(f,"is required")}catch(e){p.push(e)}}),w(d)},m.array=function(e,t,r){const s=h(t)?t.split(",").map(e=>e.trim()):t;if(l(s)&&!Array.isArray(s))throw new n(r,"is not an array");if(l(e.minLength)&&(!l(s)||s.length<e.minLength))throw new n(r,`has too few elements (min ${e.minLength} elements)`);if(l(e.maxLength)&&l(s)&&s.length>e.maxLength)throw new n(r,`has too many elements (max ${e.maxLength} elements)`);const i=e.attributes;return l(i)?s.map((e,t)=>m.byRules(i,e,`${r}[${t}]`)):s},m.boolean=function(e,t,r){let s=t;if(["true","1","t"].includes(`${s}`.toLowerCase()))s=!0;else if(["false","0","f"].includes(`${s}`.toLowerCase()))s=!1;else if(l(s))throw new n(r,"is not true or false");return s},m.email=function(e,t,r){if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))throw new n(r,"is not a valid email address");return t},m.null=function(e,t,r){if(null!==t)throw new n(r,"must be null");return t},m.integer=function(e,t,r){let s=t;if(Number.isInteger(s)||(s=parseInt(s,10)),isNaN(s))throw new n(r,"is not an integer");if(l(e.max)&&s>e.max)throw new n(r,`is too large (max ${e.max})`);if(l(e.min)&&s<e.min)throw new n(r,`is too small (min ${e.min})`);return s},m.float=function(e,t,r){const s=parseFloat(t,10);if(isNaN(s))throw new n(r,"is not a float");if(l(e.max)&&s>e.max)throw new n(r,`is too large (max ${e.max})`);if(l(e.min)&&s<e.min)throw new n(r,`is too small (min ${e.min})`);return s},m.object=function(e,t,r){if((u(t)||Object.keys(t).length<1)&&e.required)throw new n(r,"is required");if(!f(t))throw new n(r,"is not an object");if(Array.isArray(e.requireOneOf)&&!a(e.requireOneOf,Object.keys(t))){const t=e.requireOneOf.join(", ");throw new n(r,`must include one of ${t}`)}if(o.call(e,"attributes")){const s=m.config.nestedNames?r:"";return m.byRules(e.attributes,t,s,!0)}return t},m.string=function(e,t,r){let s;if(l(t)){if(!h(t))throw new n(r,"is not a string");if(s=t.toString(),e.minLength&&s.trim().length<e.minLength)throw new n(r,`is too short (min ${e.minLength} characters)`);if(e.maxLength&&s.trim().length>e.maxLength)throw new n(r,`is too long (max ${e.maxLength} characters)`);return s}if(e.required&&!l(s))throw new n(r,"is not a string");return s},e.exports=((e,t)=>new Promise((r,s)=>{let n,i;try{i=m.byRules(e,t)}catch(e){n=e}n?s(n):r(i)})),e.exports.sync=((e,t)=>m.byRules(e,t)),e.exports.setConfig=((e={})=>{m.setConfig(e)})}])});